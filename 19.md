# Automate Infrastructure With IaC using Terraform. Part 4 â€“ Terraform Cloud #

# Introduction #

In this project, terraform will be executed from the cloud console. The AMIs are  built differently with packer while Ansible is used to configure the infrastructure after its been provisioned by Terraform.

# Step 1: Setup a Terraform Account #

Verify your email and create an organization on the terraform cloud website, select the version control workflow option in order to run the terraform commands triggered from the git repository.
Create a repository called terrafrom-aws-pbl-19 and push the terraform codes in project 18 into the repository. Connect the workspace to the repository created and click on the create workspace.

![10  Created a new owrkspace](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/a058aff0-d6f3-4871-bc78-6f666bc8591b)

![11  created a workspace](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/421c27be-54de-465f-a09e-c9b06cfdcc5b)

![12 Created a workspace2](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/32e28279-8a93-4817-a2c6-6a647c8c4714)

![13  workspace succesfully created](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/774b5c2b-e5a8-4bc0-96b9-0030b69e2f80)

![14 workspace succesfully created 2](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/60affb3e-fa9f-4417-a646-ce0967fa82b8)

![15  workspace variables](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/687b922e-d417-46db-94c8-8a3927786a87)

Terraform cloud is set to apply the codes from gitHub and create all necessary AWS resources.

Step 2: Building AMI with Packer

Install packer on your local machine, Clone the repository and changing directory to the AMI folder and run the packer commands to build AMI for Bastion server, Nginx server, Ubuntu and webserver.


Packer build for Bastion server:
![6 packer build bastion](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/8f39db9b-b52e-4239-9b6a-85b525f5226f)

Packer build for Nginx server
![7  packer build nginx](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/da3cf146-5c73-413c-862d-7c37494320bb)

Packer build for Ubuntu Server
![8  packer build ubuntu](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/b13aa9f5-1c8f-4182-8f33-331bc2ffcded)

Packer build for Web server
![9  packer build web](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/bc62c0b6-afcd-464d-bfed-98553415bb5d)

Confirm that the AMI's have successfully being built on the AWS console

![16  amis of  all parker builds](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/043319d4-ae65-42a6-9b6d-fa33017759c7)


Update the IDs of the new AMIS generated from the packer build in the terraform codes

![17  uodated the amis of tbastion ngninx, sonar and web with the packer images](https://github.com/opeyemiagbadero/19.-Automate-Infrastructure-With-IaC-using-Terraform.-Part-4-Terraform-Cloud/assets/79456052/1ad0f7fc-cf74-4824-92a9-67eec4515bae)
































